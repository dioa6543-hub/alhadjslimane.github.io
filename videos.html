<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Lecteur - Alhadj Slimane</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo Alhadj Slimane" width="60" height="60">
    <h1 id="videoTitle">Chargement…</h1>
  </header>

  <div class="player-box">
    <div class="loader"><div></div></div>
    <iframe id="ytFrame" src="" allow="autoplay; encrypted-media; picture-in-picture; web-share" allowfullscreen></iframe>
  </div>

  <div class="size-buttons">
    <button onclick="setSize(50)">50%</button>
    <button onclick="setSize(75)">75%</button>
    <button onclick="setSize(100)">100%</button>
    <button onclick="setSize(1280)">Maxi</button>
  </div>

  <a href="index.html" class="back">
    <i class="fas fa-arrow-left"></i> Retour à la liste
  </a>

  <button id="startBtn" class="start-btn">
    <i class="fas fa-play"></i> Lire la vidéo
  </button>

  <script>
    const params = new URLSearchParams(window.location.search);
    const videoId = params.get('id') || 'jNQXAC9IVRw';
    const title = params.get('title') || 'Vidéo';
    document.getElementById('videoTitle').textContent = title;

    const iframe = document.getElementById('ytFrame');
    const startBtn = document.getElementById('startBtn');

    startBtn.addEventListener('click', () => {
      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&color=white`;
      startBtn.style.display = 'none';
      document.querySelector('.loader')?.remove();
    });

    function setSize(percent) {
      const root = document.documentElement;
      if (percent === 100) {
        root.style.setProperty('--max-width', '100%');
      } else if (percent === 1280) {
        root.style.setProperty('--max-width', '1280px');
      } else {
        root.style.setProperty('--max-width', percent + '%');
      }
    }
  </script>
</body>
</html>
